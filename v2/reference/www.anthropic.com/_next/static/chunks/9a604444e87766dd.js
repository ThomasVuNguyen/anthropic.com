(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,649551,t=>{"use strict";var e=t.i(843476),n=t.i(271645);let i=(0,n.createContext)(!1);function r({gpcDetected:t,children:n}){return(0,e.jsx)(i.Provider,{value:t,children:n})}function o(){return(0,n.useContext)(i)}t.s(["default",()=>r,"useGPC",()=>o])},222979,146327,t=>{"use strict";var e,n,i=t.i(235249),r=t.i(247167);function o(){return void 0!==r.default&&r.default.env?r.default.env:{}}var a=t.i(55605),s=t.i(45493);function u(t,e,n,i){var r,o=[t,e,n,i],a=(0,s.isPlainObject)(t)?t.event:t;if(!a||!(0,s.isString)(a))throw Error("Event missing");var u=(0,s.isPlainObject)(t)?null!=(r=t.properties)?r:{}:(0,s.isPlainObject)(e)?e:{},c={};return(0,s.isFunction)(n)||(c=null!=n?n:{}),(0,s.isPlainObject)(t)&&!(0,s.isFunction)(e)&&(c=null!=e?e:{}),[a,u,c,o.find(s.isFunction)]}function c(t,e,n,i,r){var o,a,u=null,c=null,l=[t,e,n,i,r],d=l.filter(s.isString);1===d.length?(c=(0,s.isString)(l[1])?l[1]:d[0],u=null):2===d.length&&("string"==typeof l[0]&&(u=l[0]),"string"==typeof l[1]&&(c=l[1]));var h=l.find(s.isFunction),p=l.filter(s.isPlainObject);return 1===p.length?(0,s.isPlainObject)(l[2])?(a={},o=l[2]):(0,s.isPlainObject)(l[3])?(o={},a=l[3]):(o=p[0],a={}):2===p.length&&(o=p[0],a=p[1]),[u,c,null!=o?o:o={},null!=a?a:a={},h]}var l=function(t){return function(){for(var e,n,i,r=[],o=0;o<arguments.length;o++)r[o]=arguments[o];for(var a={},u=["callback","options","traits","id"],c=0;c<r.length;c++){var l=r[c],d=u.pop();if("id"===d){if((0,s.isString)(l)||(0,s.isNumber)(l)){a.id=l.toString();continue}if(null==l)continue;d=u.pop()}if(("traits"===d||"options"===d)&&(null==l||(0,s.isPlainObject)(l))&&(a[d]=l),(0,s.isFunction)(l)){a.callback=l;break}}return[null!=(e=a.id)?e:t.id(),null!=(n=a.traits)?n:{},null!=(i=a.options)?i:{},a.callback]}};function d(t,e,n,i){(0,s.isNumber)(t)&&(t=t.toString()),(0,s.isNumber)(e)&&(e=e.toString());var r=[t,e,n,i],o=r.filter(s.isString),a=o[0],u=void 0===a?t:a,c=o[1],l=r.filter(s.isPlainObject)[0];return[u,void 0===c?null:c,void 0===l?{}:l,r.find(s.isFunction)]}var h=t.i(508991),p=t.i(683049),f=t.i(814920),g=t.i(502471),_=t.i(416997),v=t.i(610991),y=function(t,e,n,i,r,o){return{__t:"bpc",c:e,p:i,u:t,s:n,t:r,r:o}},m=Object.keys(y("","","","","","")),b=function(t){var e=t.indexOf("#");return -1===e?t:t.slice(0,e)},w=function(t){try{return new URL(t).pathname}catch(e){return"/"===t[0]?t:"/"+t}},S=function(t){var e=t.c,n=t.p,i=t.s,r=t.u,o=t.r,a=t.t,s=e?w(e):n,u=e?e.indexOf("?")>-1?e:e+i:b(r);return{path:s,referrer:o,search:i,title:a,url:u}},E=function(){var t=document.querySelector("link[rel='canonical']");return y(location.href,t&&t.getAttribute("href")||void 0,location.search,location.pathname,document.title,document.referrer)},C=function(t,e){void 0===e&&(e=S(E()));var n,r,o,a=t.context;"page"===t.type&&(o=t.properties&&(n=t.properties,r=Object.keys(e),Object.assign.apply(Object,(0,i.__spreadArray)([{}],r.map(function(t){var e;if(n&&Object.prototype.hasOwnProperty.call(n,t))return(e={})[t]=n[t],e}),!1))),t.properties=(0,i.__assign)((0,i.__assign)((0,i.__assign)({},e),t.properties),t.name?{name:t.name}:{})),a.page=(0,i.__assign)((0,i.__assign)((0,i.__assign)({},e),o),a.page)},A=t.i(708721),I=function(t){function e(e,n){var i=t.call(this,"".concat(e," ").concat(n))||this;return i.field=e,i}return(0,f.__extends)(e,t),e}(Error),O="is not a string",P="is not an object",N=function(t){var e,n;this.settings=t,this.createMessageId=t.createMessageId,this.onEventMethodCall=null!=(e=t.onEventMethodCall)?e:function(){},this.onFinishedEvent=null!=(n=t.onFinishedEvent)?n:function(){}},k=function(t){function e(e){var n=t.call(this,{createMessageId:function(){return"ajs-next-".concat(Date.now(),"-").concat((0,v.v4)())},onEventMethodCall:function(t){var e=t.options;n.maybeUpdateAnonId(e)},onFinishedEvent:function(t){return n.addIdentity(t),t}})||this;return n.user=e,n}return(0,i.__extends)(e,t),e.prototype.maybeUpdateAnonId=function(t){(null==t?void 0:t.anonymousId)&&this.user.anonymousId(t.anonymousId)},e.prototype.addIdentity=function(t){this.user.id()&&(t.userId=this.user.id()),this.user.anonymousId()&&(t.anonymousId=this.user.anonymousId())},e.prototype.track=function(e,n,i,r,o){var a=t.prototype.track.call(this,e,n,i,r);return C(a,o),a},e.prototype.page=function(e,n,i,r,o,a){var s=t.prototype.page.call(this,e,n,i,r,o);return C(s,a),s},e.prototype.screen=function(e,n,i,r,o,a){var s=t.prototype.screen.call(this,e,n,i,r,o);return C(s,a),s},e.prototype.identify=function(e,n,i,r,o){var a=t.prototype.identify.call(this,e,n,i,r);return C(a,o),a},e.prototype.group=function(e,n,i,r,o){var a=t.prototype.group.call(this,e,n,i,r);return C(a,o),a},e.prototype.alias=function(e,n,i,r,o){var a=t.prototype.alias.call(this,e,n,i,r);return C(a,o),a},e}(function(){function t(t){this.settings=new N(t)}return t.prototype.track=function(t,e,n,i){return this.settings.onEventMethodCall({type:"track",options:n}),this.normalize((0,f.__assign)((0,f.__assign)({},this.baseEvent()),{event:t,type:"track",properties:null!=e?e:{},options:(0,f.__assign)({},n),integrations:(0,f.__assign)({},i)}))},t.prototype.page=function(t,e,n,i,r){this.settings.onEventMethodCall({type:"page",options:i});var o,a={type:"page",properties:(0,f.__assign)({},n),options:(0,f.__assign)({},i),integrations:(0,f.__assign)({},r)};return null!==t&&(a.category=t,a.properties=null!=(o=a.properties)?o:{},a.properties.category=t),null!==e&&(a.name=e),this.normalize((0,f.__assign)((0,f.__assign)({},this.baseEvent()),a))},t.prototype.screen=function(t,e,n,i,r){this.settings.onEventMethodCall({type:"screen",options:i});var o={type:"screen",properties:(0,f.__assign)({},n),options:(0,f.__assign)({},i),integrations:(0,f.__assign)({},r)};return null!==t&&(o.category=t),null!==e&&(o.name=e),this.normalize((0,f.__assign)((0,f.__assign)({},this.baseEvent()),o))},t.prototype.identify=function(t,e,n,i){return this.settings.onEventMethodCall({type:"identify",options:n}),this.normalize((0,f.__assign)((0,f.__assign)({},this.baseEvent()),{type:"identify",userId:t,traits:null!=e?e:{},options:(0,f.__assign)({},n),integrations:i}))},t.prototype.group=function(t,e,n,i){return this.settings.onEventMethodCall({type:"group",options:n}),this.normalize((0,f.__assign)((0,f.__assign)({},this.baseEvent()),{type:"group",traits:null!=e?e:{},options:(0,f.__assign)({},n),integrations:(0,f.__assign)({},i),groupId:t}))},t.prototype.alias=function(t,e,n,i){this.settings.onEventMethodCall({type:"alias",options:n});var r={userId:t,type:"alias",options:(0,f.__assign)({},n),integrations:(0,f.__assign)({},i)};return(null!==e&&(r.previousId=e),void 0===t)?this.normalize((0,f.__assign)((0,f.__assign)({},r),this.baseEvent())):this.normalize((0,f.__assign)((0,f.__assign)({},this.baseEvent()),r))},t.prototype.baseEvent=function(){return{integrations:{},options:{}}},t.prototype.context=function(t){var e,n=["userId","anonymousId","timestamp","messageId"];delete t.integrations;var i=Object.keys(t),r=null!=(e=t.context)?e:{},o={};return i.forEach(function(e){"context"!==e&&(n.includes(e)?(0,A.dset)(o,e,t[e]):(0,A.dset)(r,e,t[e]))}),[r,o]},t.prototype.normalize=function(t){var e,n,i,r=Object.keys(null!=(n=t.integrations)?n:{}).reduce(function(e,n){var i,r;return(0,f.__assign)((0,f.__assign)({},e),((i={})[n]=!!(null==(r=t.integrations)?void 0:r[n]),i))},{});e=t.options||{},t.options=Object.keys(e).filter(function(t){return function(t,e){return void 0!==e}(t,e[t])}).reduce(function(t,n){return t[n]=e[n],t},{});var o=(0,f.__assign)((0,f.__assign)({},r),null==(i=t.options)?void 0:i.integrations),a=t.options?this.context(t.options):[],u=a[0],c=a[1],l=t.options,d=(0,f.__rest)(t,["options"]),h=(0,f.__assign)((0,f.__assign)((0,f.__assign)((0,f.__assign)({timestamp:new Date},d),{context:u,integrations:o}),c),{messageId:l.messageId||this.settings.createMessageId()});return this.settings.onFinishedEvent(h),!function(t){if(!(0,s.exists)(t))throw new I("Event","is nil");if("object"!=typeof t)throw new I("Event",P);if(!(0,s.isString)(t.type))throw new I(".type",O);if(!(0,s.isString)(t.messageId))throw new I(".messageId",O);if("track"===t.type){if(!(0,s.isString)(t.event))throw new I(".event",O);if(!(0,s.isPlainObject)(t.properties))throw new I(".properties",P)}["group","identify"].includes(t.type)&&function(t){if(!(0,s.isPlainObject)(t.traits))throw new I(".traits",P)}(t)}(h),h},t}()),M=function(t){return"addMiddleware"in t&&"destination"===t.type},T=t.i(793783),R=t.i(459912),D=t.i(382420),L=function(){var t,e,n=0;return{done:function(){return t},run:function(i){var r=i();return"object"==typeof r&&null!==r&&"then"in r&&"function"==typeof r.then&&(1==++n&&(t=new Promise(function(t){return e=t})),r.finally(function(){return 0==--n&&e()})),r}}},j=t.i(587603),x=function(t){function e(e){return t.call(this,"string"==typeof e?new T.PersistedPriorityQueue(4,e):e)||this}return(0,i.__extends)(e,t),e.prototype.flush=function(){return(0,i.__awaiter)(this,void 0,void 0,function(){return(0,i.__generator)(this,function(e){return(0,h.isOffline)()?[2,[]]:[2,t.prototype.flush.call(this)]})})},e}(function(t){function e(e){var n=t.call(this)||this;return n.criticalTasks=L(),n.plugins=[],n.failedInitializations=[],n.flushing=!1,n.queue=e,n.queue.on(R.ON_REMOVE_FROM_FUTURE,function(){n.scheduleFlush(0)}),n}return(0,f.__extends)(e,t),e.prototype.register=function(t,e,n){return(0,f.__awaiter)(this,void 0,void 0,function(){var i,r,o=this;return(0,f.__generator)(this,function(a){switch(a.label){case 0:if(this.plugins.push(e),i=function(n){o.failedInitializations.push(e.name),o.emit("initialization_failure",e),console.warn(e.name,n),t.log("warn","Failed to load destination",{plugin:e.name,error:n}),o.plugins=o.plugins.filter(function(t){return t!==e})},"destination"!==e.type||"Segment.io"===e.name)return[3,1];return e.load(t,n).catch(i),[3,4];case 1:return a.trys.push([1,3,,4]),[4,e.load(t,n)];case 2:return a.sent(),[3,4];case 3:return r=a.sent(),i(r),[3,4];case 4:return[2]}})})},e.prototype.deregister=function(t,e,n){return(0,f.__awaiter)(this,void 0,void 0,function(){var i;return(0,f.__generator)(this,function(r){switch(r.label){case 0:if(r.trys.push([0,3,,4]),!e.unload)return[3,2];return[4,Promise.resolve(e.unload(t,n))];case 1:r.sent(),r.label=2;case 2:return this.plugins=this.plugins.filter(function(t){return t.name!==e.name}),[3,4];case 3:return i=r.sent(),t.log("warn","Failed to unload destination",{plugin:e.name,error:i}),[3,4];case 4:return[2]}})})},e.prototype.dispatch=function(t){return(0,f.__awaiter)(this,void 0,void 0,function(){var e;return(0,f.__generator)(this,function(n){return t.log("debug","Dispatching"),t.stats.increment("message_dispatched"),this.queue.push(t),e=this.subscribeToDelivery(t),this.scheduleFlush(0),[2,e]})})},e.prototype.subscribeToDelivery=function(t){return(0,f.__awaiter)(this,void 0,void 0,function(){var e=this;return(0,f.__generator)(this,function(n){return[2,new Promise(function(n){var i=function(r,o){r.isSame(t)&&(e.off("flush",i),n(r))};e.on("flush",i)})]})})},e.prototype.dispatchSingle=function(t){return(0,f.__awaiter)(this,void 0,void 0,function(){var e=this;return(0,f.__generator)(this,function(n){return t.log("debug","Dispatching"),t.stats.increment("message_dispatched"),this.queue.updateAttempts(t),t.attempts=1,[2,this.deliver(t).catch(function(n){return e.enqueuRetry(n,t)?e.subscribeToDelivery(t):(t.setFailedDelivery({reason:n}),t)})]})})},e.prototype.isEmpty=function(){return 0===this.queue.length},e.prototype.scheduleFlush=function(t){var e=this;void 0===t&&(t=500),this.flushing||(this.flushing=!0,setTimeout(function(){e.flush().then(function(){setTimeout(function(){e.flushing=!1,e.queue.length&&e.scheduleFlush(0)},0)})},t))},e.prototype.deliver=function(t){return(0,f.__awaiter)(this,void 0,void 0,function(){var e,n,i,r;return(0,f.__generator)(this,function(o){switch(o.label){case 0:return[4,this.criticalTasks.done()];case 1:o.sent(),e=Date.now(),o.label=2;case 2:return o.trys.push([2,4,,5]),[4,this.flushOne(t)];case 3:return t=o.sent(),n=Date.now()-e,this.emit("delivery_success",t),t.stats.gauge("delivered",n),t.log("debug","Delivered",t.event),[2,t];case 4:throw r=i=o.sent(),t.log("error","Failed to deliver",r),this.emit("delivery_failure",t,r),t.stats.increment("delivery_failed"),i;case 5:return[2]}})})},e.prototype.enqueuRetry=function(t,e){return!!(!(t instanceof D.ContextCancelation)||t.retry)&&this.queue.pushWithBackoff(e)},e.prototype.flush=function(){return(0,f.__awaiter)(this,void 0,void 0,function(){var t,e;return(0,f.__generator)(this,function(n){switch(n.label){case 0:if(0===this.queue.length||!(t=this.queue.pop()))return[2,[]];t.attempts=this.queue.getAttempts(t),n.label=1;case 1:return n.trys.push([1,3,,4]),[4,this.deliver(t)];case 2:return t=n.sent(),this.emit("flush",t,!0),[3,4];case 3:return e=n.sent(),this.enqueuRetry(e,t)||(t.setFailedDelivery({reason:e}),this.emit("flush",t,!1)),[2,[]];case 4:return[2,[t]]}})})},e.prototype.isReady=function(){return!0},e.prototype.availableExtensions=function(t){var e,n,i=(e="type",n={},this.plugins.filter(function(e){if("destination"!==e.type&&"Segment.io"!==e.name)return!0;var n,i,r,o=void 0;return null==(n=e.alternativeNames)||n.forEach(function(e){void 0!==t[e]&&(o=t[e])}),null!=(r=null!=(i=t[e.name])?i:o)?r:!1!==("Segment.io"===e.name||t.All)}).forEach(function(t){var i,r=void 0;if("string"==typeof e){var o=t[e];r="string"!=typeof o?JSON.stringify(o):o}else e instanceof Function&&(r=e(t));void 0!==r&&(n[r]=(0,f.__spreadArray)((0,f.__spreadArray)([],null!=(i=n[r])?i:[],!0),[t],!1))}),n),r=i.before,o=i.enrichment,a=i.destination,s=i.after;return{before:void 0===r?[]:r,enrichment:void 0===o?[]:o,destinations:void 0===a?[]:a,after:void 0===s?[]:s}},e.prototype.flushOne=function(t){var e,n;return(0,f.__awaiter)(this,void 0,void 0,function(){var i,r,o,a,s,u,c,l,d,h,p,g,_;return(0,f.__generator)(this,function(f){switch(f.label){case 0:if(!this.isReady())throw Error("Not ready");t.attempts>1&&this.emit("delivery_retry",t),r=(i=this.availableExtensions(null!=(e=t.event.integrations)?e:{})).before,o=i.enrichment,a=0,s=r,f.label=1;case 1:if(!(a<s.length))return[3,4];return u=s[a],[4,(0,j.ensure)(t,u)];case 2:(c=f.sent())instanceof D.CoreContext&&(t=c),this.emit("message_enriched",t,u),f.label=3;case 3:return a++,[3,1];case 4:l=0,d=o,f.label=5;case 5:if(!(l<d.length))return[3,8];return h=d[l],[4,(0,j.attempt)(t,h)];case 6:(c=f.sent())instanceof D.CoreContext&&(t=c),this.emit("message_enriched",t,h),f.label=7;case 7:return l++,[3,5];case 8:return g=(p=this.availableExtensions(null!=(n=t.event.integrations)?n:{})).destinations,_=p.after,[4,new Promise(function(e,n){setTimeout(function(){Promise.all(g.map(function(e){return(0,j.attempt)(t,e)})).then(e).catch(n)},0)})];case 9:return f.sent(),t.stats.increment("message_delivered"),this.emit("message_delivered",t),[4,Promise.all(_.map(function(e){return(0,j.attempt)(t,e)}))];case 10:return f.sent(),[2,t]}})})},e}(_.Emitter));function F(t){for(var e=t.constructor.prototype,n=0,i=Object.getOwnPropertyNames(e);n<i.length;n++){var r=i[n];if("constructor"!==r){var o=Object.getOwnPropertyDescriptor(t.constructor.prototype,r);o&&"function"==typeof o.value&&(t[r]=t[r].bind(t))}}return t}var K=function(t,e,n,i){console.warn("".concat(t.constructor.name,": Can't ").concat(e,' key "').concat(n,'" | Err: ').concat(i))},U=function(){function t(t){this.stores=t}return t.prototype.get=function(t){for(var e=null,n=0,i=this.stores;n<i.length;n++){var r=i[n];try{if(null!=(e=r.get(t)))return e}catch(e){K(r,"get",t,e)}}return null},t.prototype.set=function(t,e){this.stores.forEach(function(n){try{n.set(t,e)}catch(e){K(n,"set",t,e)}})},t.prototype.clear=function(t){this.stores.forEach(function(e){try{e.remove(t)}catch(n){K(e,"remove",t,n)}})},t.prototype.getAndSync=function(t){var e=this.get(t),n="number"==typeof e?e.toString():e;return this.set(t,n),n},t}(),G=function(){function t(){this.cache={}}return t.prototype.get=function(t){var e;return null!=(e=this.cache[t])?e:null},t.prototype.set=function(t,e){this.cache[t]=e},t.prototype.remove=function(t){delete this.cache[t]},t}(),q={Cookie:"cookie",LocalStorage:"localStorage",Memory:"memory"};function B(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)t[i]=n[i]}return t}var z=function t(e,n){function i(t,i,r){if("undefined"!=typeof document){"number"==typeof(r=B({},n,r)).expires&&(r.expires=new Date(Date.now()+864e5*r.expires)),r.expires&&(r.expires=r.expires.toUTCString()),t=encodeURIComponent(t).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var o="";for(var a in r)r[a]&&(o+="; "+a,!0!==r[a]&&(o+="="+r[a].split(";")[0]));return document.cookie=t+"="+e.write(i,t)+o}}return Object.create({set:i,get:function(t){if("undefined"!=typeof document&&(!arguments.length||t)){for(var n=document.cookie?document.cookie.split("; "):[],i={},r=0;r<n.length;r++){var o=n[r].split("="),a=o.slice(1).join("=");try{var s=decodeURIComponent(o[0]);if(i[s]=e.read(a,s),t===s)break}catch(t){}}return t?i[t]:i}},remove:function(t,e){i(t,"",B({},e,{expires:-1}))},withAttributes:function(e){return t(this.converter,B({},this.attributes,e))},withConverter:function(e){return t(B({},this.converter,e),this.attributes)}},{attributes:{value:Object.freeze(n)},converter:{value:Object.freeze(e)}})}({read:function(t){return'"'===t[0]&&(t=t.slice(1,-1)),t.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(t){return encodeURIComponent(t).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}},{path:"/"});function W(t){var e=function(t){try{return new URL(t)}catch(t){return}}(t);if(e)for(var n=function(t){var e=t.hostname.split("."),n=e[e.length-1],i=[];if(4===e.length&&parseInt(n,10)>0||e.length<=1)return i;for(var r=e.length-2;r>=0;--r)i.push(e.slice(r).join("."));return i}(e),i=0;i<n.length;++i){var r="__tld__",o=n[i],a={domain:"."+o};try{if(z.set(r,"1",a),z.get(r))return z.remove(r,a),o}catch(t){return}}}var V=function(){function t(e){void 0===e&&(e=t.defaults),this.options=(0,i.__assign)((0,i.__assign)({},t.defaults),e)}return Object.defineProperty(t,"defaults",{get:function(){return{maxage:365,domain:W(window.location.href),path:"/",sameSite:"Lax"}},enumerable:!1,configurable:!0}),t.prototype.opts=function(){return{sameSite:this.options.sameSite,expires:this.options.maxage,domain:this.options.domain,path:this.options.path,secure:this.options.secure}},t.prototype.get=function(t){var e;try{var n=z.get(t);if(null==n)return null;try{return null!=(e=JSON.parse(n))?e:null}catch(t){return null!=n?n:null}}catch(t){return null}},t.prototype.set=function(t,e){"string"==typeof e?z.set(t,e,this.opts()):null===e?z.remove(t,this.opts()):z.set(t,JSON.stringify(e),this.opts())},t.prototype.remove=function(t){return z.remove(t,this.opts())},t}(),Y=function(){function t(){}return t.prototype.localStorageWarning=function(t,e){console.warn("Unable to access ".concat(t,", localStorage may be ").concat(e))},t.prototype.get=function(t){var e;try{var n=localStorage.getItem(t);if(null===n)return null;try{return null!=(e=JSON.parse(n))?e:null}catch(t){return null!=n?n:null}}catch(e){return this.localStorageWarning(t,"unavailable"),null}},t.prototype.set=function(t,e){try{localStorage.setItem(t,JSON.stringify(e))}catch(e){this.localStorageWarning(t,"full")}},t.prototype.remove=function(t){try{return localStorage.removeItem(t)}catch(e){this.localStorageWarning(t,"unavailable")}},t}();function $(t){return t&&t.stores&&Array.isArray(t.stores)&&t.stores.every(function(t){return Object.values(q).includes(t)})}function J(t){return t.map(function(t){var e,n;switch("object"==typeof t&&void 0!==t.name?(e=t.name,n=t.settings):e=t,e){case q.Cookie:return new V(n);case q.LocalStorage:return new Y;case q.Memory:return new G;default:throw Error("Unknown Store Type: ".concat(t))}})}function H(t,e){return t.map(function(t){return e&&t===q.Cookie?{name:t,settings:e}:t})}var Q={persist:!0,cookie:{key:"ajs_user_id",oldKey:"ajs_user"},localStorage:{key:"ajs_user_traits"}},X=function(){function t(t,e){void 0===t&&(t=Q);var n,r,o,a,s=this;this.options={},this.id=function(t){if(s.options.disable)return null;var e=s.identityStore.getAndSync(s.idKey);void 0!==t&&(s.identityStore.set(s.idKey,t),t!==e&&null!==e&&null!==t&&s.anonymousId(null));var n=s.identityStore.getAndSync(s.idKey);if(n)return n;var i=s.legacyUserStore.get(Q.cookie.oldKey);return i?"object"==typeof i?i.id:i:null},this.anonymousId=function(t){var e,n;if(s.options.disable)return null;if(void 0===t){var i=null!=(e=s.identityStore.getAndSync(s.anonKey))?e:null==(n=s.legacySIO())?void 0:n[0];if(i)return i}return null===t?s.identityStore.set(s.anonKey,null):s.identityStore.set(s.anonKey,null!=t?t:(0,v.v4)()),s.identityStore.getAndSync(s.anonKey)},this.traits=function(t){var e;if(!s.options.disable)return null===t&&(t={}),t&&s.traitsStore.set(s.traitsKey,null!=t?t:{}),null!=(e=s.traitsStore.get(s.traitsKey))?e:{}},this.options=(0,i.__assign)((0,i.__assign)({},Q),t),this.cookieOptions=e,this.idKey=null!=(r=null==(n=t.cookie)?void 0:n.key)?r:Q.cookie.key,this.traitsKey=null!=(a=null==(o=t.localStorage)?void 0:o.key)?a:Q.localStorage.key,this.anonKey="ajs_anonymous_id",this.identityStore=this.createStorage(this.options,e),this.legacyUserStore=this.createStorage(this.options,e,function(t){return t===q.Cookie}),this.traitsStore=this.createStorage(this.options,e,function(t){return t!==q.Cookie});var u=this.legacyUserStore.get(Q.cookie.oldKey);u&&"object"==typeof u&&(u.id&&this.id(u.id),u.traits&&this.traits(u.traits)),F(this)}return t.prototype.legacySIO=function(){var t=this.legacyUserStore.get("_sio");if(!t)return null;var e=t.split("----");return[e[0],e[1]]},t.prototype.identify=function(t,e){if(!this.options.disable){e=null!=e?e:{};var n=this.id();(null===n||n===t)&&(e=(0,i.__assign)((0,i.__assign)({},this.traits()),e)),t&&this.id(t),this.traits(e)}},t.prototype.logout=function(){this.anonymousId(null),this.id(null),this.traits({})},t.prototype.reset=function(){this.logout(),this.identityStore.clear(this.idKey),this.identityStore.clear(this.anonKey),this.traitsStore.clear(this.traitsKey)},t.prototype.load=function(){return new t(this.options,this.cookieOptions)},t.prototype.save=function(){return!0},t.prototype.createStorage=function(t,e,n){var i=[q.LocalStorage,q.Cookie,q.Memory];return t.disable?new U([]):t.persist?(void 0!==t.storage&&null!==t.storage&&$(t.storage)&&(i=t.storage.stores),t.localStorageFallbackDisabled&&(i=i.filter(function(t){return t!==q.LocalStorage})),n&&(i=i.filter(n)),new U(J(H(i,e)))):new U([new G])},t.defaults=Q,t}(),Z={persist:!0,cookie:{key:"ajs_group_id"},localStorage:{key:"ajs_group_properties"}},tt=function(t){function e(e,n){void 0===e&&(e=Z);var r=t.call(this,(0,i.__assign)((0,i.__assign)({},Z),e),n)||this;return r.anonymousId=function(t){},F(r),r}return(0,i.__extends)(e,t),e}(X),te=t.i(930694),tn=t.i(920611),ti=t.i(813113),tr=t.i(134621),to=function(t,e,n){n.getAndRemove(t).forEach(function(t){tp(e,t).catch(console.error)})},ta=to.bind(void 0,"on"),ts=to.bind(void 0,"setAnonymousId"),tu=function(t,e){Object.keys(e.calls).forEach(function(n){e.getAndRemove(n).forEach(function(e){setTimeout(function(){tp(t,e).catch(console.error)},0)})})},tc=function(t){if(tl(t))return S(t.pop())},tl=function(t){var e=t[t.length-1];if("object"!==Object.prototype.toString.call(e).slice(8,-1).toLowerCase()||"bpc"!==e.__t)return!1;for(var n in e)if(!m.includes(n))return!1;return!0},td=function(t,e,n,i){void 0===n&&(n=function(){}),void 0===i&&(i=console.error),this.method=t,this.resolve=n,this.reject=i,this.called=!1,this.args=e},th=function(){function t(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._callMap={},this.add.apply(this,t)}return Object.defineProperty(t.prototype,"calls",{get:function(){return this._pushSnippetWindowBuffer(),this._callMap},set:function(t){this._callMap=t},enumerable:!1,configurable:!0}),t.prototype.get=function(t){var e;return null!=(e=this.calls[t])?e:[]},t.prototype.getAndRemove=function(t){var e=this.get(t);return this.calls[t]=[],e},t.prototype.add=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];e.forEach(function(e){["track","screen","alias","group","page","identify"].includes(e.method)&&!tl(e.args)&&(e.args=(0,i.__spreadArray)((0,i.__spreadArray)([],e.args,!0),[E()],!1)),t.calls[e.method]?t.calls[e.method].push(e):t.calls[e.method]=[e]})},t.prototype.clear=function(){this._pushSnippetWindowBuffer(),this.calls={}},t.prototype.toArray=function(){var t;return(t=[]).concat.apply(t,Object.values(this.calls))},t.prototype._pushSnippetWindowBuffer=function(){if("npm"!==(0,tr.getVersionType)()){var t=(0,ti.getGlobalAnalytics)();if(Array.isArray(t)){var e=t.splice(0,t.length).map(function(t){return new td(t[0],t.slice(1))});this.add.apply(this,e)}}},t}();function tp(t,e){return(0,i.__awaiter)(this,void 0,void 0,function(){var n,r;return(0,i.__generator)(this,function(i){switch(i.label){case 0:var o;if(i.trys.push([0,3,,4]),e.called)return[2,void 0];if(e.called=!0,!("object"==typeof(o=n=t[e.method].apply(t,e.args))&&null!==o&&"then"in o&&"function"==typeof o.then))return[3,2];return[4,n];case 1:i.sent(),i.label=2;case 2:return e.resolve(n),[3,4];case 3:return r=i.sent(),e.reject(r),[3,4];case 4:return[2]}})})}var tf=function(){function t(t){var e=this;this.trackSubmit=this._createMethod("trackSubmit"),this.trackClick=this._createMethod("trackClick"),this.trackLink=this._createMethod("trackLink"),this.pageView=this._createMethod("pageview"),this.identify=this._createMethod("identify"),this.reset=this._createMethod("reset"),this.group=this._createMethod("group"),this.track=this._createMethod("track"),this.ready=this._createMethod("ready"),this.alias=this._createMethod("alias"),this.debug=this._createChainableMethod("debug"),this.page=this._createMethod("page"),this.once=this._createChainableMethod("once"),this.off=this._createChainableMethod("off"),this.on=this._createChainableMethod("on"),this.addSourceMiddleware=this._createMethod("addSourceMiddleware"),this.setAnonymousId=this._createMethod("setAnonymousId"),this.addDestinationMiddleware=this._createMethod("addDestinationMiddleware"),this.screen=this._createMethod("screen"),this.register=this._createMethod("register"),this.deregister=this._createMethod("deregister"),this.user=this._createMethod("user"),this.VERSION=te.version,this._preInitBuffer=new th,this._promise=t(this._preInitBuffer),this._promise.then(function(t){var n=t[0],i=t[1];e.instance=n,e.ctx=i}).catch(function(){})}return t.prototype.then=function(){for(var t,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return(t=this._promise).then.apply(t,e)},t.prototype.catch=function(){for(var t,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return(t=this._promise).catch.apply(t,e)},t.prototype.finally=function(){for(var t,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return(t=this._promise).finally.apply(t,e)},t.prototype._createMethod=function(t){var e=this;return function(){for(var n,i=[],r=0;r<arguments.length;r++)i[r]=arguments[r];return e.instance?Promise.resolve((n=e.instance)[t].apply(n,i)):new Promise(function(n,r){e._preInitBuffer.add(new td(t,i,n,r))})}},t.prototype._createChainableMethod=function(t){var e=this;return function(){for(var n,i=[],r=0;r<arguments.length;r++)i[r]=arguments[r];return e.instance?(n=e.instance)[t].apply(n,i):e._preInitBuffer.add(new td(t,i)),e}},t}(),tg=t.i(319045),t_=t.i(570541),tv=function(t){var e=!1;window.addEventListener("pagehide",function(){e||t(e=!0)}),document.addEventListener("visibilitychange",function(){if("hidden"==document.visibilityState){if(e)return;e=!0}else e=!1;t(e)})},ty=function(t){function e(e,n){var i=t.call(this,e)||this;return i.retryTimeout=n,i.name="RateLimitError",i}return(0,i.__extends)(e,t),e}(Error),tm=function(t){return(0,i.__assign)({"Content-Type":"text/plain"},"function"==typeof t?t():t)};function tb(t){return(encodeURI(JSON.stringify(t)).split(/%..|./).length-1)/1024}var tw=t.i(785630);function tS(t,e,n,r){var o=this;t||setTimeout(function(){return(0,i.__awaiter)(o,void 0,void 0,function(){var t,o;return(0,i.__generator)(this,function(a){switch(a.label){case 0:return t=!0,[4,function(t,e){return(0,i.__awaiter)(this,void 0,void 0,function(){var n,r=this;return(0,i.__generator)(this,function(o){switch(o.label){case 0:if(n=[],(0,h.isOffline)())return[2,e];return[4,(0,tw.pWhile)(function(){return e.length>0&&!(0,h.isOffline)()},function(){return(0,i.__awaiter)(r,void 0,void 0,function(){var r;return(0,i.__generator)(this,function(i){switch(i.label){case 0:if(!(r=e.pop()))return[2];return[4,(0,j.attempt)(r,t)];case 1:return i.sent()instanceof p.Context||n.push(r),[2]}})})})];case 1:return o.sent(),n.map(function(t){return e.pushWithBackoff(t)}),[2,e]}})})}(n,e)];case 1:return o=a.sent(),t=!1,e.todo>0&&r(t,o,n,r),[2]}})})},5e3*Math.random())}var tE=t.i(133041),tC=function(t){return"Segment.io"===t.name},tA="This is being deprecated and will be not be available in future releases of Analytics JS",tI=(0,tn.getGlobal)(),tO=null==tI?void 0:tI.analytics,tP=function(){function t(t,e){var n;this.timeout=300,this._getSegmentPluginMetadata=function(){var t;return null==(t=e.plugins.find(tC))?void 0:t.metadata},this.writeKey=t.writeKey,this.cdnSettings=null!=(n=t.cdnSettings)?n:{integrations:{"Segment.io":{apiKey:""}}},this.cdnURL=t.cdnURL}return Object.defineProperty(t.prototype,"apiHost",{get:function(){var t,e;return null==(e=null==(t=this._getSegmentPluginMetadata)?void 0:t.call(this))?void 0:e.apiHost},enumerable:!1,configurable:!0}),t}();function tN(){console.warn(tA)}var tk=function(e){function n(t,n,r,o,a){var s,u,c,l,d,h,p=this;(p=e.call(this)||this)._debug=!1,p.initialized=!1,p.user=function(){return p._user},p.init=p.initialize.bind(p),p.log=tN,p.addIntegrationMiddleware=tN,p.listeners=tN,p.addEventListener=tN,p.removeAllListeners=tN,p.removeListener=tN,p.removeEventListener=tN,p.hasListeners=tN,p.add=tN,p.addIntegration=tN;var f=null==n?void 0:n.cookie,g=null!=(d=null==n?void 0:n.disableClientPersistence)&&d;p.queue=null!=r?r:(s="".concat(t.writeKey,":event-queue"),void 0===(u=null==n?void 0:n.retryQueue)&&(u=!1),void 0===(c=g)&&(c=!1),l=u?10:1,new x(c?new R.PriorityQueue(l,[]):new T.PersistedPriorityQueue(l,s))),p.settings=new tP(t,p.queue);var _=null==n?void 0:n.storage;return p._universalStorage=p.createStore(g,_,f),p._user=null!=o?o:new X((0,i.__assign)({persist:!g,storage:null==n?void 0:n.storage},null==n?void 0:n.user),f).load(),p._group=null!=a?a:new tt((0,i.__assign)({persist:!g,storage:null==n?void 0:n.storage},null==n?void 0:n.group),f).load(),p.eventFactory=new k(p._user),p.integrations=null!=(h=null==n?void 0:n.integrations)?h:{},p.options=null!=n?n:{},F(p),p}return(0,i.__extends)(n,e),n.prototype.createStore=function(t,e,n){return new U(t?[new G]:e&&$(e)?J(H(e.stores,n)):J([q.LocalStorage,{name:q.Cookie,settings:n},q.Memory]))},Object.defineProperty(n.prototype,"storage",{get:function(){return this._universalStorage},enumerable:!1,configurable:!0}),n.prototype.track=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return(0,i.__awaiter)(this,void 0,void 0,function(){var e,n,r,o,a,s,c,l=this;return(0,i.__generator)(this,function(i){return e=tc(t),r=(n=u.apply(void 0,t))[0],o=n[1],a=n[2],s=n[3],c=this.eventFactory.track(r,o,a,this.integrations,e),[2,this._dispatch(c,s).then(function(t){return l.emit("track",r,t.event.properties,t.event.options),t})]})})},n.prototype.page=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return(0,i.__awaiter)(this,void 0,void 0,function(){var e,n,r,o,a,s,u,l,d=this;return(0,i.__generator)(this,function(i){return e=tc(t),r=(n=c.apply(void 0,t))[0],o=n[1],a=n[2],s=n[3],u=n[4],l=this.eventFactory.page(r,o,a,s,this.integrations,e),[2,this._dispatch(l,u).then(function(t){return d.emit("page",r,o,t.event.properties,t.event.options),t})]})})},n.prototype.identify=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return(0,i.__awaiter)(this,void 0,void 0,function(){var e,n,r,o,a,s,u,c=this;return(0,i.__generator)(this,function(i){return e=tc(t),r=(n=l(this._user).apply(void 0,t))[0],o=n[1],a=n[2],s=n[3],this._user.identify(r,o),u=this.eventFactory.identify(this._user.id(),this._user.traits(),a,this.integrations,e),[2,this._dispatch(u,s).then(function(t){return c.emit("identify",t.event.userId,t.event.traits,t.event.options),t})]})})},n.prototype.group=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var i=tc(e);if(0===e.length)return this._group;var r=l(this._group).apply(void 0,e),o=r[0],a=r[1],s=r[2],u=r[3];this._group.identify(o,a);var c=this._group.id(),d=this._group.traits(),h=this.eventFactory.group(c,d,s,this.integrations,i);return this._dispatch(h,u).then(function(e){return t.emit("group",e.event.groupId,e.event.traits,e.event.options),e})},n.prototype.alias=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return(0,i.__awaiter)(this,void 0,void 0,function(){var e,n,r,o,a,s,u,c=this;return(0,i.__generator)(this,function(i){return e=tc(t),r=(n=d.apply(void 0,t))[0],o=n[1],a=n[2],s=n[3],u=this.eventFactory.alias(r,o,a,this.integrations,e),[2,this._dispatch(u,s).then(function(t){return c.emit("alias",r,o,t.event.options),t})]})})},n.prototype.screen=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return(0,i.__awaiter)(this,void 0,void 0,function(){var e,n,r,o,a,s,u,l,d=this;return(0,i.__generator)(this,function(i){return e=tc(t),r=(n=c.apply(void 0,t))[0],o=n[1],a=n[2],s=n[3],u=n[4],l=this.eventFactory.screen(r,o,a,s,this.integrations,e),[2,this._dispatch(l,u).then(function(t){return d.emit("screen",r,o,t.event.properties,t.event.options),t})]})})},n.prototype.trackClick=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return(0,i.__awaiter)(this,void 0,void 0,function(){var n;return(0,i.__generator)(this,function(r){switch(r.label){case 0:return[4,t.A(104098)];case 1:return[2,(n=r.sent().link).call.apply(n,(0,i.__spreadArray)([this],e,!1))]}})})},n.prototype.trackLink=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return(0,i.__awaiter)(this,void 0,void 0,function(){var n;return(0,i.__generator)(this,function(r){switch(r.label){case 0:return[4,t.A(104098)];case 1:return[2,(n=r.sent().link).call.apply(n,(0,i.__spreadArray)([this],e,!1))]}})})},n.prototype.trackSubmit=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return(0,i.__awaiter)(this,void 0,void 0,function(){var n;return(0,i.__generator)(this,function(r){switch(r.label){case 0:return[4,t.A(104098)];case 1:return[2,(n=r.sent().form).call.apply(n,(0,i.__spreadArray)([this],e,!1))]}})})},n.prototype.trackForm=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return(0,i.__awaiter)(this,void 0,void 0,function(){var n;return(0,i.__generator)(this,function(r){switch(r.label){case 0:return[4,t.A(104098)];case 1:return[2,(n=r.sent().form).call.apply(n,(0,i.__spreadArray)([this],e,!1))]}})})},n.prototype.register=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return(0,i.__awaiter)(this,void 0,void 0,function(){var e,n=this;return(0,i.__generator)(this,function(i){switch(i.label){case 0:return e=p.Context.system(),[4,Promise.all(t.map(function(t){return n.queue.register(e,t,n)}))];case 1:return i.sent(),[2,e]}})})},n.prototype.deregister=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return(0,i.__awaiter)(this,void 0,void 0,function(){var e,n=this;return(0,i.__generator)(this,function(i){switch(i.label){case 0:return e=p.Context.system(),[4,Promise.all(t.map(function(t){var i=n.queue.plugins.find(function(e){return e.name===t});if(i)return n.queue.deregister(e,i,n);e.log("warn","plugin ".concat(t," not found"))}))];case 1:return i.sent(),[2,e]}})})},n.prototype.debug=function(t){return!1===t&&localStorage.getItem("debug")&&localStorage.removeItem("debug"),this._debug=t,this},n.prototype.reset=function(){this._user.reset(),this._group.reset(),this.emit("reset")},n.prototype.timeout=function(t){this.settings.timeout=t},n.prototype._dispatch=function(t,e){return(0,i.__awaiter)(this,void 0,void 0,function(){var n;return(0,i.__generator)(this,function(i){return((n=new p.Context(t)).stats.increment("analytics_js.invoke",1,[t.type]),(0,h.isOffline)()&&!this.options.retryQueue)?[2,n]:[2,function(t,e,n,i){return(0,f.__awaiter)(this,void 0,void 0,function(){var r,o;return(0,f.__generator)(this,function(a){switch(a.label){case 0:if(n.emit("dispatch_start",t),r=Date.now(),!e.isEmpty())return[3,2];return[4,e.dispatchSingle(t)];case 1:return o=a.sent(),[3,4];case 2:return[4,e.dispatch(t)];case 3:o=a.sent(),a.label=4;case 4:var s,u;if(!(null==i?void 0:i.callback))return[3,6];return[4,(0,g.invokeCallback)(o,i.callback,(s=r,Math.max((null!=(u=i.timeout)?u:300)-(Date.now()-s),0)))];case 5:o=a.sent(),a.label=6;case 6:return(null==i?void 0:i.debug)&&o.flush(),[2,o]}})})}(n,this.queue,this,{callback:e,debug:this._debug,timeout:this.settings.timeout})]})})},n.prototype.addSourceMiddleware=function(e){return(0,i.__awaiter)(this,void 0,void 0,function(){var n=this;return(0,i.__generator)(this,function(r){switch(r.label){case 0:return[4,this.queue.criticalTasks.run(function(){return(0,i.__awaiter)(n,void 0,void 0,function(){var n,r,o;return(0,i.__generator)(this,function(i){switch(i.label){case 0:return[4,t.A(971106)];case 1:return n=i.sent().sourceMiddlewarePlugin,r={},this.queue.plugins.forEach(function(t){if("destination"===t.type)return r[t.name]=!0}),o=n(e,r),[4,this.register(o)];case 2:return i.sent(),[2]}})})})];case 1:return r.sent(),[2,this]}})})},n.prototype.addDestinationMiddleware=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];return this.queue.plugins.filter(M).forEach(function(n){("*"===t||n.name.toLowerCase()===t.toLowerCase())&&n.addMiddleware.apply(n,e)}),Promise.resolve(this)},n.prototype.setAnonymousId=function(t){return this._user.anonymousId(t)},n.prototype.queryString=function(e){return(0,i.__awaiter)(this,void 0,void 0,function(){return(0,i.__generator)(this,function(n){switch(n.label){case 0:if(!1===this.options.useQueryString)return[2,[]];return[4,t.A(216332)];case 1:return[2,(0,n.sent().queryString)(this,e)]}})})},n.prototype.use=function(t){return t(this),this},n.prototype.ready=function(t){return void 0===t&&(t=function(t){return t}),(0,i.__awaiter)(this,void 0,void 0,function(){return(0,i.__generator)(this,function(e){return[2,Promise.all(this.queue.plugins.map(function(t){return t.ready?t.ready():Promise.resolve()})).then(function(e){return t(e),e})]})})},n.prototype.noConflict=function(){return console.warn(tA),(0,ti.setGlobalAnalytics)(null!=tO?tO:this),this},n.prototype.normalize=function(t){return console.warn(tA),this.eventFactory.normalize(t)},Object.defineProperty(n.prototype,"failedInitializations",{get:function(){return console.warn(tA),this.queue.failedInitializations},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"VERSION",{get:function(){return te.version},enumerable:!1,configurable:!0}),n.prototype.initialize=function(t,e){return(0,i.__awaiter)(this,void 0,void 0,function(){return(0,i.__generator)(this,function(t){return console.warn(tA),[2,Promise.resolve(this)]})})},n.prototype.pageview=function(t){return(0,i.__awaiter)(this,void 0,void 0,function(){return(0,i.__generator)(this,function(e){switch(e.label){case 0:return console.warn(tA),[4,this.page({path:t})];case 1:return e.sent(),[2,this]}})})},Object.defineProperty(n.prototype,"plugins",{get:function(){var t;return console.warn(tA),null!=(t=this._plugins)?t:{}},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"Integrations",{get:function(){return console.warn(tA),this.queue.plugins.filter(function(t){return"destination"===t.type}).reduce(function(t,e){var n="".concat(e.name.toLowerCase().replace(".","").split(" ").join("-"),"Integration"),i=window[n];if(!i)return t;var r=i.Integration;return r?t[e.name]=r:t[e.name]=i,t},{})},enumerable:!1,configurable:!0}),n.prototype.push=function(t){var e=t.shift();(!e||this[e])&&this[e].apply(this,t)},n}(_.Emitter),tM=function(t){function e(){var e=t.call(this,{writeKey:""},{disableClientPersistence:!0})||this;return e.initialized=!0,e}return(0,i.__extends)(e,t),e}(tk),tT=t.i(652977),tR=t.i(681473),tD=t.i(845955),tL=function(t){try{var e=new URLSearchParams;return Object.entries(t).forEach(function(t){var n=t[0],i=t[1];Array.isArray(i)?i.forEach(function(t){return e.append(n,t)}):e.append(n,i)}),e.toString()}catch(t){return""}},tj=new function(){var t=this;this.name="Page Enrichment",this.type="before",this.version="0.1.0",this.isLoaded=function(){return!0},this.load=function(e,n){return(0,i.__awaiter)(t,void 0,void 0,function(){var t;return(0,i.__generator)(this,function(e){switch(e.label){case 0:this.instance=n,e.label=1;case 1:return e.trys.push([1,3,,4]),t=this,[4,function(t){return(0,i.__awaiter)(this,void 0,void 0,function(){var e;return(0,i.__generator)(this,function(n){return(e=navigator.userAgentData)?t?[2,e.getHighEntropyValues(t).catch(function(){return e.toJSON()})]:[2,e.toJSON()]:[2,void 0]})})}(this.instance.options.highEntropyValuesClientHints)];case 2:return t.userAgentData=e.sent(),[3,4];case 3:return e.sent(),[3,4];case 4:return[2,Promise.resolve()]}})})},this.enrich=function(n){var r,o,a,s,u,c,l=n.event.context,d=l.page.search||"",h="object"==typeof d?tL(d):d;l.userAgent=navigator.userAgent,l.userAgentData=t.userAgentData;var p=navigator.userLanguage||navigator.language;void 0===l.locale&&void 0!==p&&(l.locale=p),null!=l.library||(l.library={name:"analytics.js",version:"".concat("web"===(0,tr.getVersionType)()?"next":"npm:next","-").concat(te.version)}),h&&!l.campaign&&((r=h).startsWith("?")&&(r=r.substring(1)),l.campaign=(r=r.replace(/\?/g,"&")).split("&").reduce(function(t,e){var n=e.split("="),i=n[0],r=n[1];if(i.includes("utm_")&&i.length>4){var o=i.slice(4);"campaign"===o&&(o="name"),t[o]=(0,tD.gracefulDecodeURIComponent)(void 0===r?"":r)}return t},{}));var f=function(){var t=z.get("_ga");if(t&&t.startsWith("amp"))return t}();f&&(l.amp={id:f}),s=(a=new U(null!=(c=t.instance.options.disableClientPersistence)&&c?[]:[new V(function(){if(e)return e;var t=W(window.location.href);return e={expires:31536e6,secure:!1,path:"/"},t&&(e.domain=t),e}())])).get("s:context.referrer"),(u=null!=(o=function(t){var e={btid:"dataxu",urid:"millennial-media"};t.startsWith("?")&&(t=t.substring(1));for(var n=(t=t.replace(/\?/g,"&")).split("&"),i=0;i<n.length;i++){var r=n[i].split("="),o=r[0],a=r[1];if(e[o])return{id:a,type:e[o]}}}(h))?o:s)&&(l&&(l.referrer=(0,i.__assign)((0,i.__assign)({},l.referrer),u)),a.set("s:context.referrer",u));try{l.timezone=Intl.DateTimeFormat().resolvedOptions().timeZone}catch(t){}return n},this.track=this.enrich,this.identify=this.enrich,this.page=this.enrich,this.group=this.enrich,this.alias=this.enrich,this.screen=this.enrich},tx=t.i(380924),tF=t.i(824124),tK=t.i(231320),tU=function(){function t(t,e){this.version="1.0.0",this.alternativeNames=[],this.loadPromise=(0,tR.createDeferred)(),this.middleware=[],this.alias=this._createMethod("alias"),this.group=this._createMethod("group"),this.identify=this._createMethod("identify"),this.page=this._createMethod("page"),this.screen=this._createMethod("screen"),this.track=this._createMethod("track"),this.action=e,this.name=t,this.type=e.type,this.alternativeNames.push(e.name)}return t.prototype.addMiddleware=function(){for(var t,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];"destination"===this.type&&(t=this.middleware).push.apply(t,e)},t.prototype.transform=function(t){return(0,i.__awaiter)(this,void 0,void 0,function(){var e;return(0,i.__generator)(this,function(n){switch(n.label){case 0:return[4,(0,tF.applyDestinationMiddleware)(this.name,t.event,this.middleware)];case 1:return null===(e=n.sent())&&t.cancel(new D.ContextCancelation({retry:!1,reason:"dropped by destination middleware"})),[2,new p.Context(e)]}})})},t.prototype._createMethod=function(t){var e=this;return function(n){return(0,i.__awaiter)(e,void 0,void 0,function(){var e,r;return(0,i.__generator)(this,function(i){switch(i.label){case 0:if(!this.action[t])return[2,n];if(e=n,"destination"!==this.type)return[3,2];return[4,this.transform(n)];case 1:e=i.sent(),i.label=2;case 2:return i.trys.push([2,5,,6]),[4,this.ready()];case 3:if(!i.sent())throw Error("Something prevented the destination from getting ready");return(0,tK.recordIntegrationMetric)(n,{integrationName:this.action.name,methodName:t,type:"action"}),[4,this.action[t](e)];case 4:return i.sent(),[3,6];case 5:throw r=i.sent(),(0,tK.recordIntegrationMetric)(n,{integrationName:this.action.name,methodName:t,type:"action",didError:!0}),r;case 6:return[2,n]}})})}},t.prototype.isLoaded=function(){return this.action.isLoaded()},t.prototype.ready=function(){return(0,i.__awaiter)(this,void 0,void 0,function(){return(0,i.__generator)(this,function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,this.loadPromise.promise];case 1:return t.sent(),[2,!0];case 2:return t.sent(),[2,!1];case 3:return[2]}})})},t.prototype.load=function(t,e){return(0,i.__awaiter)(this,void 0,void 0,function(){var n,r,o,a;return(0,i.__generator)(this,function(i){switch(i.label){case 0:if(this.loadPromise.isSettled())return[2,this.loadPromise.promise];i.label=1;case 1:return i.trys.push([1,3,,4]),(0,tK.recordIntegrationMetric)(t,{integrationName:this.action.name,methodName:"load",type:"action"}),n=this.action.load(t,e),o=(r=this.loadPromise).resolve,[4,n];case 2:return o.apply(r,[i.sent()]),[2,n];case 3:throw a=i.sent(),(0,tK.recordIntegrationMetric)(t,{integrationName:this.action.name,methodName:"load",type:"action",didError:!0}),this.loadPromise.reject(a),a;case 4:return[2]}})})},t.prototype.unload=function(t,e){var n,i;return null==(i=(n=this.action).unload)?void 0:i.call(n,t,e)},t}(),tG=(0,tn.getGlobal)(),tq=null!=(n=tG.__SEGMENT_INSPECTOR__)?n:tG.__SEGMENT_INSPECTOR__={},tB=function(t){var e;return null==(e=tq.attach)?void 0:e.call(tq,t)},tz=t.i(778302),tW=function(){var t,e,n=null!=(t=window.location.hash)?t:"",i=null!=(e=window.location.search)?e:"";return i.length?i:n.replace(/(?=#).*(?=\?)/,"")},tV=function(e){function n(){var n=this,r=(0,tR.createDeferred)(),s=r.promise,u=r.resolve;return(n=e.call(this,function(e){return s.then(function(n){return function(e,n,r){var s,u,c,l,d,f,g,_,v;return void 0===n&&(n={}),(0,i.__awaiter)(this,void 0,void 0,function(){var y,m,b,w,S,E,C,A,I,O;return(0,i.__generator)(this,function(P){switch(P.label){case 0:if(!0===n.disable)return[2,[new tM,p.Context.system()]];if(n.globalAnalyticsKey&&(0,ti.setGlobalAnalyticsKey)(n.globalAnalyticsKey),e.cdnURL&&(0,a.setGlobalCDNUrl)(e.cdnURL),n.initialPageview&&r.add(new td("page",[])),y=tW(),m=null!=(s=e.cdnURL)?s:(0,a.getCDN)(),null==(u=e.cdnSettings))return[3,1];return w=u,[3,3];case 1:var N,k;return[4,(N=e.writeKey,k=m,(0,t_.fetch)("".concat(k,"/v1/projects/").concat(N,"/settings")).then(function(t){return t.ok?t.json():t.text().then(function(t){throw Error(t)})}).catch(function(t){throw console.error(t.message),t}))];case 2:w=P.sent(),P.label=3;case 3:if(b=w,n.updateCDNSettings&&(b=n.updateCDNSettings(b)),"function"!=typeof n.disable)return[3,5];return[4,n.disable(b)];case 4:if(P.sent())return[2,[new tM,p.Context.system()]];P.label=5;case 5:return S=null==(l=null==(c=b.integrations["Segment.io"])?void 0:c.retryQueue)||l,n=(0,i.__assign)({retryQueue:S},n),tB(E=new tk((0,i.__assign)((0,i.__assign)({},e),{cdnSettings:b,cdnURL:m}),n)),C=null!=(d=e.plugins)?d:[],A=null!=(f=e.classicIntegrations)?f:[],I=null==(g=n.integrations)?void 0:g["Segment.io"],tz.Stats.initRemoteMetrics((0,i.__assign)((0,i.__assign)({},b.metrics),{host:null!=(_=null==I?void 0:I.apiHost)?_:null==(v=b.metrics)?void 0:v.host,protocol:null==I?void 0:I.protocol})),[4,function(e,n,r,s,u,c,l){var d,f,g;return void 0===u&&(u=[]),(0,i.__awaiter)(this,void 0,void 0,function(){var _,v,y,m,b,w,S,E,C,A,I,O,P,N,k=this;return(0,i.__generator)(this,function(M){var D,L,j;switch(M.label){case 0:if(ts(r,l),ta(r,l),_=null==u?void 0:u.filter(function(t){return"object"==typeof t}),v=null==u?void 0:u.filter(function(t){return"function"==typeof t&&"string"==typeof t.pluginName}),"test"===o().NODE_ENV||!((null!=(j=null==(L=null==(D=n.middlewareSettings)?void 0:D.routingRules)?void 0:L.length)?j:0)>0))return[3,2];return[4,t.A(369583).then(function(t){return t.tsubMiddleware(n.middlewareSettings.routingRules)})];case 1:return m=M.sent(),[3,3];case 2:m=void 0,M.label=3;case 3:if(y=m,("test"===o().NODE_ENV||!(Object.keys(n.integrations).length>1))&&!(c.length>0))return[3,5];return[4,t.A(149122).then(function(t){return t.ajsDestinations(e,n,r.integrations,s,y,c)})];case 4:return w=M.sent(),[3,6];case 5:w=[],M.label=6;case 6:if(b=w,!n.legacyVideoPluginsEnabled)return[3,8];return[4,t.A(473470).then(function(t){return t.loadLegacyVideoPlugins(r)})];case 7:M.sent(),M.label=8;case 8:if(!(null==(d=s.plan)?void 0:d.track))return[3,10];return[4,t.A(128089).then(function(t){var e;return t.schemaFilter(null==(e=s.plan)?void 0:e.track,n)})];case 9:return E=M.sent(),[3,11];case 10:E=void 0,M.label=11;case 11:return S=E,C=(0,tT.mergedOptions)(n,s),[4,(function(t,e,n,r,o,s){var u,c,l;return(0,i.__awaiter)(this,void 0,void 0,function(){var d,h,p=this;return(0,i.__generator)(this,function(f){switch(f.label){case 0:return d=[],h=null!=(c=null==(u=t.middlewareSettings)?void 0:u.routingRules)?c:[],[4,Promise.all((null!=(l=t.remotePlugins)?l:[]).map(function(t){return(0,i.__awaiter)(p,void 0,void 0,function(){var u,c,l,p,f,g;return(0,i.__generator)(this,function(_){switch(_.label){case 0:var v,y;if(v=e[t.creationName],y=e[t.name],!1===e.All&&!v&&!y||!1===v||!1===y||0)return[2];_.label=1;case 1:if(_.trys.push([1,6,,7]),c=null==s?void 0:s.find(function(e){return e.pluginName===t.name}))return[3,3];return[4,function(t,e){return(0,i.__awaiter)(this,void 0,void 0,function(){var n,r,o,s,u,c;return(0,i.__generator)(this,function(i){switch(i.label){case 0:if(i.trys.push([0,9,,10]),n=RegExp("https://cdn.segment.(com|build)"),r=(0,a.getCDN)(),!e)return[3,6];s=(o=t.url.split("/"))[o.length-2],u=t.url.replace(s,btoa(s).replace(/=/g,"")),i.label=1;case 1:return i.trys.push([1,3,,5]),[4,(0,tx.loadScript)(u.replace(n,r))];case 2:case 4:return i.sent(),[3,5];case 3:return i.sent(),[4,(0,tx.loadScript)(t.url.replace(n,r))];case 5:return[3,8];case 6:return[4,(0,tx.loadScript)(t.url.replace(n,r))];case 7:i.sent(),i.label=8;case 8:if("function"==typeof window[t.libraryName])return[2,window[t.libraryName]];return[3,10];case 9:throw c=i.sent(),console.error("Failed to create PluginFactory",t),c;case 10:return[2]}})})}(t,null==r?void 0:r.obfuscate)];case 2:c=_.sent(),_.label=3;case 3:if(!(u=c))return[3,5];return l=n[t.name],[4,u((0,i.__assign)((0,i.__assign)({},t.settings),l))];case 4:!function(t){if(!Array.isArray(t))throw Error("Not a valid list of plugins");var e=["load","isLoaded","name","version","type"];t.forEach(function(t){e.forEach(function(e){var n;if(void 0===t[e])throw Error("Plugin: ".concat(null!=(n=t.name)?n:"unknown"," missing required function ").concat(e))})})}(f=Array.isArray(p=_.sent())?p:[p]),g=h.filter(function(e){return e.destinationName===t.creationName}),f.forEach(function(e){var n=new tU(t.creationName,e);g.length&&o&&n.addMiddleware(o),d.push(n)}),_.label=5;case 5:return[3,7];case 6:return console.warn("Failed to load Remote Plugin",_.sent()),[3,7];case 7:return[2]}})})}))];case 1:return f.sent(),[2,d.filter(Boolean)]}})})})(n,r.integrations,C,s,y,v).catch(function(){return[]})];case 12:if(A=M.sent(),I=(0,i.__spreadArray)((0,i.__spreadArray)([tj],b,!0),A,!0),S&&I.push(S),(null==(f=s.integrations)?void 0:f.All)===!1&&!s.integrations["Segment.io"]||s.integrations&&!1===s.integrations["Segment.io"])return[3,14];return P=(O=I).push,[4,function(t,e,n){window.addEventListener("pagehide",function(){c.push.apply(c,Array.from(l)),l.clear()});var r,o,a,s,u=null!=(o=null==e?void 0:e.apiKey)?o:"",c=t.options.disableClientPersistence?new R.PriorityQueue(t.queue.queue.maxAttempts,[]):new T.PersistedPriorityQueue(t.queue.queue.maxAttempts,"".concat(u,":dest-Segment.io")),l=new Set,d=null!=(a=null==e?void 0:e.apiHost)?a:tE.SEGMENT_API_HOST,f=null!=(s=null==e?void 0:e.protocol)?s:"https",g="".concat(f,"://").concat(d),_=null==e?void 0:e.deliveryStrategy,v=_&&"strategy"in _&&"batching"===_.strategy?function(t,e){var n,r,o,a=[],s=!1,u=null!=(n=null==e?void 0:e.size)?n:10,c=null!=(r=null==e?void 0:e.timeout)?r:5e3,l=0;function d(n){if(0!==n.length){var r,o=null==(r=n[0])?void 0:r.writeKey,a=n.map(function(t){return t.sentAt,(0,i.__rest)(t,["sentAt"])});return(0,t_.fetch)("https://".concat(t,"/b"),{credentials:null==e?void 0:e.credentials,keepalive:(null==e?void 0:e.keepalive)||s,headers:tm(null==e?void 0:e.headers),method:"post",body:JSON.stringify({writeKey:o,batch:a,sentAt:new Date().toISOString()}),priority:null==e?void 0:e.priority}).then(function(t){var e;if(t.status>=500)throw Error("Bad response from server: ".concat(t.status));if(429===t.status){var n=null==(e=t.headers)?void 0:e.get("x-ratelimit-reset"),i="string"==typeof n?1e3*parseInt(n):c;throw new ty("Rate limit exceeded: ".concat(t.status),i)}})}}function h(t){var n;return void 0===t&&(t=1),(0,i.__awaiter)(this,void 0,void 0,function(){var r;return(0,i.__generator)(this,function(o){return a.length?(r=a,a=[],[2,null==(n=d(r))?void 0:n.catch(function(n){var o;p.Context.system().log("error","Error sending batch",n),t<=(null!=(o=null==e?void 0:e.maxRetries)?o:10)&&("RateLimitError"===n.name&&(l=n.retryTimeout),a.push.apply(a,r),a.map(function(e){"_metadata"in e&&(e._metadata=(0,i.__assign)((0,i.__assign)({},e._metadata),{retryCount:t}))}),f(t+1))})]):[2]})})}function f(t){void 0===t&&(t=1),o||(o=setTimeout(function(){o=void 0,h(t).catch(console.error)},l||c),l=0)}return tv(function(t){if((s=t)&&a.length){var e,n;Promise.all((e=[],n=0,a.forEach(function(t){tb(e[n])>=64&&n++,e[n]?e[n].push(t):e[n]=[t]}),e).map(d)).catch(console.error)}}),{dispatch:function(t,n){return(0,i.__awaiter)(this,void 0,void 0,function(){return(0,i.__generator)(this,function(t){return a.push(n),[2,a.length>=u||tb(a)>=450||(null==e?void 0:e.keepalive)&&tb(a)>=54||s?h():f()]})})}}}(d,_.config):(r=null==_?void 0:_.config,{dispatch:function(t,e){return(0,t_.fetch)(t,{credentials:null==r?void 0:r.credentials,keepalive:null==r?void 0:r.keepalive,headers:tm(null==r?void 0:r.headers),method:"post",body:JSON.stringify(e),priority:null==r?void 0:r.priority}).then(function(t){var e;if(t.status>=500)throw Error("Bad response from server: ".concat(t.status));if(429===t.status){var n=null==(e=t.headers)?void 0:e.get("x-ratelimit-reset"),i=n?1e3*parseInt(n):5e3;throw new ty("Rate limit exceeded: ".concat(t.status),i)}})}});function y(r){return(0,i.__awaiter)(this,void 0,void 0,function(){var o,a;return(0,i.__generator)(this,function(s){var u,d,p,f,_,y;return(0,h.isOffline)()?(c.push(r),tS(!1,c,m,tS),[2,r]):(l.add(r),o=r.event.type.charAt(0),a=(0,tg.toFacade)(r.event).json(),"track"===r.event.type&&delete a.traits,"alias"===r.event.type&&(u=a,y=t.user(),u.previousId=null!=(f=null!=(p=null!=(d=u.previousId)?d:u.from)?p:y.id())?f:y.anonymousId(),u.userId=null!=(_=u.userId)?_:u.to,delete u.from,delete u.to,a=u),c.getAttempts(r)>=c.maxAttempts)?(l.delete(r),[2,r]):[2,v.dispatch("".concat(g,"/").concat(o),function(t,e,n,r,o){var a,s=t.user();delete e.options,e.writeKey=null==n?void 0:n.apiKey,e.userId=e.userId||s.id(),e.anonymousId=e.anonymousId||s.anonymousId(),e.sentAt=new Date;var u=t.queue.failedInitializations||[];u.length>0&&(e._metadata={failedInitializations:u}),null!=o&&(o.attempts>1&&(e._metadata=(0,i.__assign)((0,i.__assign)({},e._metadata),{retryCount:o.attempts})),o.attempts++);var c=[],l=[];for(var d in r){var h=r[d];"Segment.io"===d&&c.push(d),"bundled"===h.bundlingStatus&&c.push(d),"unbundled"===h.bundlingStatus&&l.push(d)}for(var p=0,f=(null==n?void 0:n.unbundledIntegrations)||[];p<f.length;p++){var g=f[p];l.includes(g)||l.push(g)}var _=null!=(a=null==n?void 0:n.maybeBundledConfigIds)?a:{},v=[];return c.sort().forEach(function(t){var e;(null!=(e=_[t])?e:[]).forEach(function(t){v.push(t)})}),(null==n?void 0:n.addBundledMetadata)!==!1&&(e._metadata=(0,i.__assign)((0,i.__assign)({},e._metadata),{bundled:c.sort(),unbundled:l.sort(),bundledIds:v})),e}(t,a,e,n,r)).then(function(){return r}).catch(function(t){if(r.log("error","Error sending event",t),"RateLimitError"===t.name){var e=t.retryTimeout;c.pushWithBackoff(r,e)}else c.pushWithBackoff(r);return tS(!1,c,m,tS),r}).finally(function(){l.delete(r)})]})})}var m={metadata:{writeKey:u,apiHost:d,protocol:f},name:"Segment.io",type:"destination",version:"0.1.0",isLoaded:function(){return!0},load:function(){return Promise.resolve()},track:y,identify:y,page:y,alias:y,group:y,screen:y};return c.todo&&tS(!1,c,m,tS),m}(r,C["Segment.io"],n.integrations)];case 13:P.apply(O,[M.sent()]),M.label=14;case 14:return[4,r.register.apply(r,(0,i.__spreadArray)((0,i.__spreadArray)([],I,!1),_,!1))];case 15:return N=M.sent(),[4,(0,i.__awaiter)(void 0,void 0,void 0,function(){var t,e;return(0,i.__generator)(this,function(n){switch(n.label){case 0:t=0,e=l.getAndRemove("register"),n.label=1;case 1:if(!(t<e.length))return[3,4];return[4,tp(r,e[t]).catch(console.error)];case 2:n.sent(),n.label=3;case 3:return t++,[3,1];case 4:return[2]}})})];case 16:if(M.sent(),!Object.entries(null!=(g=n.enabledMiddleware)?g:{}).some(function(t){return t[1]}))return[3,18];return[4,t.A(414800).then(function(t){var e=t.remoteMiddlewares;return(0,i.__awaiter)(k,void 0,void 0,function(){return(0,i.__generator)(this,function(t){switch(t.label){case 0:return[4,e(N,n,s.obfuscate)];case 1:return[2,Promise.all(t.sent().map(function(t){return r.addSourceMiddleware(t)}))]}})})})];case 17:M.sent(),M.label=18;case 18:return[4,(0,i.__awaiter)(void 0,void 0,void 0,function(){var t,e;return(0,i.__generator)(this,function(n){switch(n.label){case 0:t=0,e=l.getAndRemove("addSourceMiddleware"),n.label=1;case 1:if(!(t<e.length))return[3,4];return[4,tp(r,e[t]).catch(console.error)];case 2:n.sent(),n.label=3;case 3:return t++,[3,1];case 4:return[2]}})})];case 19:return M.sent(),[2,N]}})})}(e.writeKey,b,E,n,C,A,r)];case 6:return O=P.sent(),E.initialized=!0,E.emit("initialize",e,n),[4,function(t,e,n){return(0,i.__awaiter)(this,void 0,void 0,function(){return(0,i.__generator)(this,function(r){switch(r.label){case 0:var o,a;return[4,(o=t,a=e,(0,i.__awaiter)(void 0,void 0,void 0,function(){return(0,i.__generator)(this,function(t){switch(t.label){case 0:if(!a.includes("ajs_"))return[3,2];return[4,o.queryString(a).catch(console.error)];case 1:t.sent(),t.label=2;case 2:return[2]}})}))];case 1:return r.sent(),tu(t,n),[2]}})})}(E,y,r)];case 7:return P.sent(),[2,[E,O]]}})})}(n[0],n[1],e)})})||this)._resolveLoadStart=function(t,e){return u([t,e])},n}return(0,i.__extends)(n,e),n.prototype.load=function(t,e){return void 0===e&&(e={}),this._resolveLoadStart(t,e),this},n.load=function(t,e){return void 0===e&&(e={}),new n().load(t,e)},n.standalone=function(t,e){return n.load({writeKey:t},e).then(function(t){return t[0]})},n}(tf);t.s(["AnalyticsBrowser",()=>tV],222979);class tY extends Error{constructor(t,e){super(e),this.name=t}}class t$ extends tY{constructor(t,e){2==arguments.length&&(t+=` (Received: ${JSON.stringify(e)})`),super("ValidationError",`[Validation] ${t}`)}}function tJ(t,e){if("function"!=typeof t)throw new t$(`${e} is not a function`,t)}function tH(t,e){if(null===t||"object"!=typeof t)throw new t$(`${e} is not an object`,t)}function tQ(t){let e=!0;if(t&&"object"==typeof t&&!Array.isArray(t)){for(let n in e=!1,t)if("boolean"!=typeof t[n]){e=!0;break}}if(e)throw new t$("Consent Categories should be {[categoryName: string]: boolean}",t)}let tX=new class{get debugLoggingEnabled(){return!0===window.SEGMENT_CONSENT_WRAPPER_DEBUG_MODE}enableDebugLogging(){window.SEGMENT_CONSENT_WRAPPER_DEBUG_MODE=!0}debug(...t){this.debugLoggingEnabled&&console.log("[consent wrapper debug]",...t)}};class tZ{constructor(){this.isAbortCalled=!1,this.isLoadCalled=!1,this.abortLoadOptions={loadSegmentNormally:!0},this.loadOptions={consentModel:"opt-in"}}load(t){this.isLoadCalled=!0,this.loadOptions={...this.loadOptions,...t},tX.debug("ctx.load called",this.loadOptions)}abort(t){this.isAbortCalled=!0,this.abortLoadOptions={...this.abortLoadOptions,...t},tX.debug("Abort consent wrapper",this.loadOptions)}validate(){if(this.isAbortCalled&&this.isLoadCalled)throw new t$("both abort and load should not be called")}}let t0=(t,...e)=>{let n=e.reduce((t,e)=>n=>e(t(n)),t=>t);return(...e)=>n(t(...e))},t1=t=>Array.from(new Set(Object.values(t).reduce((t,e)=>t.concat(e)))),t2=(t,e)=>!!e&&!e.hasUnmappedDestinations&&Object.keys(t).filter(e=>t[e]).every(t=>!e.allCategories.includes(t)),t4=(t,e,n,i={})=>{let{integrationCategoryMappings:r,shouldEnableIntegration:o}=i,a=(r?r[t]:(t=>{if(t&&"object"==typeof t&&"consentSettings"in t&&"object"==typeof t.consentSettings&&t.consentSettings&&"categories"in t.consentSettings&&Array.isArray(t.consentSettings.categories))return t.consentSettings.categories||void 0})(e.integrations[t]))??[];return o?o(a,n,{creationName:t}):!a||!a.length||a.every(t=>n[t])};class t3{get analytics(){return t5(this.uninitializedAnalytics)}get cdnSettings(){return this.cdnSettingsDeferred.promise}async getAllCategories(){return(this.settings.integrationCategoryMappings?t1(this.settings.integrationCategoryMappings):(await this.cdnSettings).consentSettings?.allCategories)??[]}async getCategories(){let t=await this.settings.getCategories();return tQ(t),t}constructor(t,e){this.cdnSettingsDeferred=(0,tR.createDeferred)(),this.createDisableOption=(t,e)=>!0===e||(n=>t2(t,n.consentSettings)||"function"==typeof e&&e(n)),function(t){if(tH(t,"analytics"),!("load"in t)||!("addSourceMiddleware"in t)||!("addDestinationMiddleware"in t)||!("track"in t))throw new t$("analytics is not an Analytics instance",t)}(t),this.settings=e,this.uninitializedAnalytics=t,this.ogAnalyticsLoad=t.load.bind(t)}async loadWithFilteredDeviceModeDestinations(...[t,e]){let n=await this.getCategories(),i=t=>((t,e,n)=>{let{remotePlugins:i,integrations:r}=t,{integrationCategoryMappings:o,shouldEnableIntegration:a}=n,s={...t,remotePlugins:[...i||[]],integrations:{...r}},u=n=>t4(n,t,e,{integrationCategoryMappings:o,shouldEnableIntegration:a});for(let t in r)u(t)?tX.debug(`Enabled (opt-in): ${t}`):(tX.debug(`Disabled (opt-in): ${t}`),s.remotePlugins=s.remotePlugins?.filter(e=>e.creationName!==t),delete s.integrations[t]);return s})(t,n,{shouldEnableIntegration:this.settings.shouldEnableIntegration,integrationCategoryMappings:this.settings.integrationCategoryMappings});return this.load(t,{...e,updateCDNSettings:t0(i,e?.updateCDNSettings??(t=>t)),disable:this.createDisableOption(n,e?.disable)})}load(...[t,e]){return this.ogAnalyticsLoad(t,{...e,updateCDNSettings:t0(e?.updateCDNSettings||(t=>t),t=>(tX.debug("CDN settings loaded",t),this.cdnSettingsDeferred.resolve(t),t))})}replaceLoadMethod(t){this.analytics.load=t}page(){this.analytics.page()}configureBlockingMiddlewareForOptOut(){var t,e,n;let i,r;t=this.cdnSettings,e=this.analytics,n={integrationCategoryMappings:this.settings.integrationCategoryMappings,shouldEnableIntegration:this.settings.shouldEnableIntegration},i=async({integration:e,payload:i,next:r})=>{let o=await t,a=i.obj.context.consent.categoryPreferences,s=!t4(e,o,a,n);if(tX.debug(`Destination middleware called: ${e}`,{DROPPED:s,categoryPreferences:a,payload:i.obj,filterSettings:n}),s)return null;r(i)},e.addDestinationMiddleware("*",i),r=async({payload:e,next:i})=>{let r=await t,o=e.obj.context.consent.categoryPreferences,a=n.integrationCategoryMappings?{hasUnmappedDestinations:!1,allCategories:t1(n.integrationCategoryMappings)}:r.consentSettings,s=t2(o,a);if(tX.debug("Source middleware called",{DROPPED:s,categoryPreferences:o,payload:e.obj,filterSettings:n,consentSettings:a}),s)return null;i(e)},e.addSourceMiddleware(r)}configureConsentStampingMiddleware(){var t;let{pruneUnmappedCategories:e}=this.settings,n=(t=async()=>{let t=await this.getCategories();if(e){var n=await this.getAllCategories();if(!n.length)throw new t$("Invariant: No consent categories defined in Segment",[]);return n.reduce((e,n)=>(n in t&&(e[n]=t[n]),e),{})}return t},async({payload:e,next:n})=>{e.obj.context.consent={...e.obj.context.consent,categoryPreferences:await t()},n(e)});this.analytics.addSourceMiddleware(n)}consentChange(t){tX.debug("Consent change",t);try{tQ(t)}catch(t){return console.error(t)}this.analytics.track("Segment Consent Preference Updated",void 0,{consent:{categoryPreferences:t}})}}let t5=t=>{if(Array.isArray(t)){let e=t._loadOptions??{},n=window[e?.globalAnalyticsKey??"analytics"];if(n?.initialized)return n}return t};t.s(["createWrapper",0,(...[t])=>{if("object"!=typeof t||!t)throw new t$("Options should be an object",t);tJ(t.getCategories,"getCategories"),t.shouldLoadSegment&&tJ(t.shouldLoadSegment,"shouldLoadSegment"),t.shouldEnableIntegration&&tJ(t.shouldEnableIntegration,"shouldEnableIntegration"),t.shouldDisableSegment&&tJ(t.shouldDisableSegment,"shouldDisableSegment"),t.integrationCategoryMappings&&tH(t.integrationCategoryMappings,"integrationCategoryMappings"),t.registerOnConsentChanged&&tJ(t.registerOnConsentChanged,"registerOnConsentChanged");let{shouldDisableSegment:e,getCategories:n,shouldLoadSegment:i,integrationCategoryMappings:r,shouldEnableIntegration:o,registerOnConsentChanged:a,shouldLoadWrapper:s,enableDebugLogging:u}=t;return t=>{let c=new t3(t,{integrationCategoryMappings:r,shouldEnableIntegration:o,getCategories:n});u&&tX.enableDebugLogging();let l=s?.()||Promise.resolve();l.then(()=>{a?.(t=>c.consentChange(t))});let d=async(t,n)=>{if(n?.initialPageview&&(c.page(),n={...n,initialPageview:!1}),await e?.())return;await l;let r=await (async()=>{let t=new tZ;return await i?.(t),t.validate(),t})();if(r.isAbortCalled){r.abortLoadOptions?.loadSegmentNormally===!0&&c.load(t,n);return}if(c.configureConsentStampingMiddleware(),"opt-in"===r.loadOptions.consentModel)return void await c.loadWithFilteredDeviceModeDestinations(t,n);if("opt-out"===r.loadOptions.consentModel){c.configureBlockingMiddlewareForOptOut(),c.load(t,n);return}var o=r.loadOptions.consentModel;throw Error(`Unhandled discriminated union member: ${JSON.stringify(o)}`)};return c.replaceLoadMethod(d),t}}],146327)},458786,949472,t=>{"use strict";function e(t){if("anthropic.com"===t||t.endsWith(".anthropic.com"))return".anthropic.com"}function n(t){if("undefined"==typeof document)return;let e=document.cookie.split(";");for(let n=0;n<e.length;n++){let[i,r]=e[n].trim().split("=");if(t===i)return decodeURIComponent(r)}}function i(t,n){if("undefined"==typeof document)return;let i=e(window.location.hostname),r=[`${t}=${encodeURIComponent(n)}`,"max-age=31536000","path=/","samesite=lax","secure"];i&&r.push(`domain=${i}`),document.cookie=r.join("; ")}function r(t){return"undefined"!=typeof document&&document.cookie.split(";").some(e=>e.trim().startsWith(`${t}=`))}let o={analytics:["ajs_anonymous_id","ajs_user_id","ajs_group_id","analytics_session_id","_ga","_gid","_gat",/^_gat_gtag_UA_.*$/,/^_ga_.*$/,/^_dc_gtm_.*$/,"__utma","__utmb","__utmc","__utmt","__utmz","__utmv","_gaexp","_gaexp_rc","_opt_expid","AMP_TOKEN","FPID","FPLC","TESTCOOKIESENABLED","li_giant","ln_or","oribi_cookie_test","oribili_user_guid"],marketing:["_fbc","_fbp","__gads","__gpi","__gpi_optout","__gsas","_gcl_aw","_gcl_dc","_gcl_au","_gcl_gb","_gcl_gf","_gcl_ha","_gcl_gs","_gcl_ag",/^_gac_.*$/,/^_gac_gb_.*$/,"GCL_AW_P","GED_PLAYLIST_ACTIVITY","ACLK_DATA","FLC","_opt_awcid","_opt_awmid","_opt_awgid","_opt_awkid","_opt_utmc","FPAU","FPGCLDC","FPGCLAW","FPGCLGB","FPGSID","FCCDCF","FCNEC","li_fat_id","ar_debug","_ttclid","_rdt_uuid"]};function a(t){if("undefined"==typeof document)return;let n="undefined"==typeof document?[]:document.cookie.split(";").map(t=>t.split("=")[0].trim());o[t].forEach(t=>{n.forEach(n=>{(t instanceof RegExp?t.test(n):n===t)&&function(t){if("undefined"==typeof document)return;if(!/^[\w-]+$/.test(t))return console.warn("[Cookies] Invalid cookie name, skipping deletion:",t);let n=window.location.hostname,i=e(n),r=n.split("."),o=r.length>=2?r.slice(-2).join("."):null,a=[void 0];i&&a.push(i),o&&o!==i&&a.push(o),n&&n!==i&&n!==o&&a.push(n);let s=["/",""];for(let e of a)for(let n of s){let i=e?`; domain=${e}`:"",r=""!==n?`; path=${n}`:"";document.cookie=`${t}=; expires=Thu, 01 Jan 1970 00:00:00 GMT${r}${i}`}}(n)})})}t.s(["deleteCookiesForCategory",()=>a,"getCookie",()=>n,"hasCookie",()=>r,"setCookie",()=>i],458786);let s=null,u=null,c=async()=>null!==s?s:u||(u=new Promise(t=>{let e=async()=>{try{let t=await fetch("/api/country"),e=await t.json();s=e.country&&"string"==typeof e.country?d.has(e.country):l()}catch(t){s=l()}t(s)};"requestIdleCallback"in window?window.requestIdleCallback(e,{timeout:2e3}):setTimeout(e,50)})),l=()=>{try{let t=(window.navigator.languages[0]||window.navigator.language).split("-")[1];return d.has(t)}catch(t){return!1}},d=new Set(["AT","BE","BG","HR","CY","CZ","DK","EE","FI","FR","DE","GR","HU","IE","IT","LV","LT","LU","MT","NL","PL","PT","RO","SK","SI","ES","SE","RE","GP","MQ","GF","YT","BL","MF","PM","WF","PF","NC","AW","CW","SX","FO","GL","AX","GB","UK","AI","BM","IO","VG","KY","FK","GI","MS","PN","SH","TC","GG","JE","IM","CA","BR","IN"]);t.s(["inExplicitConsentRequiredCountry",0,c],949472)},475552,t=>{"use strict";t.s(["ACCEPT_ALL_CONSENT_PREFERENCES",0,{analytics:!0,marketing:!0},"CONSENT_PREFERENCES_COOKIE_KEY",0,"anthropic-consent-preferences","REJECT_ALL_CONSENT_PREFERENCES",0,{analytics:!1,marketing:!1}])},44428,t=>{"use strict";var e=t.i(458786),n=t.i(949472),i=t.i(475552);async function r(){let t=(0,e.getCookie)(i.CONSENT_PREFERENCES_COOKIE_KEY);return t?JSON.parse(t):await (0,n.inExplicitConsentRequiredCountry)()?i.REJECT_ALL_CONSENT_PREFERENCES:i.ACCEPT_ALL_CONSENT_PREFERENCES}t.s(["getInitialConsentPreferences",()=>r])},685149,t=>{"use strict";var e=t.i(247167);let n=e.default.env.NEXT_ENV||"production",i={production:"https://www.anthropic.com",development:"http://localhost:3000",staging:"https://www.staging.ant.dev",preview:"https://www-preview.ant.dev"},r=["claude.ai",...Object.values(i)],o=i[n],a="Case Study",s="case-study",u=[{label:"Alignment",value:"alignment"},{label:"Announcements",value:"announcements"},{label:a,value:s},{label:"Economic Research",value:"economic-research"},{label:"Interpretability",value:"interpretability"},{label:"Policy",value:"policy"},{label:"Product",value:"product"},{label:"Societal Impacts",value:"societal-impacts"}];function c(t,e){if(void 0===t)throw Error(e);return t}let l=c("website","Missing environment variable: NEXT_PUBLIC_SANITY_DATASET"),d=c("4zrzovbb","Missing environment variable: NEXT_PUBLIC_SANITY_PROJECT_ID"),h=e.default.env.SANITY_API_READ_TOKEN||"",p=e.default.env.SANITY_WRITE_TOKEN||"";t.s(["ARTICLE_TYPES",0,{customer:{label:"Customer",value:"customerArticle"},engineering:{label:"Engineering",value:"engineeringArticle"},news:{label:"News",value:"newsArticle"},research:{label:"Research",value:"researchArticle"}},"BASE_URL",0,o,"CASE_STUDY_TAG_TYPES",0,["Industry","Size","Product","Partner","Geography"],"CASE_STUDY_VALUE",0,s,"ENGINEERING_SUBJECTS",0,[{label:"Architecture",value:"architecture"},{label:"Performance",value:"performance"},{label:"Security",value:"security"},{label:"Testing",value:"testing"},{label:"Developer Tools",value:"developer-tools"},{label:"Open Source",value:"open-source"}],"ENVIRONMENT",0,n,"HOSTNAMES_TO_KEEP_ADS_PARAMS",0,r,"NEWS_SUBJECTS",0,[{label:"Policy",value:"policy"},{label:"Announcements",value:"announcements"},{label:"Product",value:"product"}],"POST_DIECTORIES",0,{caseStudy:{label:a,value:s},news:{label:"News",value:"news"},research:{label:"Research",value:"research"}},"POST_SUBJECTS",0,u,"RESEARCH_SUBJECTS",0,[{label:"Interpretability",value:"interpretability"},{label:"Societal Impacts",value:"societal-impacts"},{label:"Alignment",value:"alignment"}],"REVALIDATE_INTERVAL",0,300,"ROUTES",0,{caseStudy:"/customers",engineering:"/engineering",form:"/contact-sales",legal:"/legal",legalArchive:"/legal/archive",news:"/news",research:"/research",economicIndex:"/economic-index"},"SANITY_API_VERSION",0,"2023-06-21","SANITY_DATASET",0,l,"SANITY_PROJECT_ID",0,d,"SANITY_READ_TOKEN",0,h,"SANITY_WRITE_TOKEN",0,p,"SEGMENT_ANONYMOUS_ID_COOKIE",0,"ajs_anonymous_id","SEGMENT_API_HOST",0,"a-api.anthropic.com/v1","SEGMENT_CDN_URL",0,"https://a-cdn.anthropic.com","SEGMENT_SOURCE",0,"website","SEGMENT_SOURCE_VERSION",0,"v1","SEGMENT_WRITE_KEY",0,"production"===n?"LKJN8LsLERHEOXkw487o7qCTFOrGPimI":"b64sf1kxwDGe1PiSAlv5ixuH0f509RKK","SUPPORTED_CROSS_DOMAIN_TRACKING_HOSTNAMES",0,["claude.ai"]])},253275,t=>{"use strict";let e,n,i,r;var o=t.i(271645),a=t.i(222979),s=t.i(146327),u=t.i(44428),c=t.i(458786),l=t.i(422233),d=t.i(685149),h=t.i(649551);let p=(r=(0,c.getCookie)(d.SEGMENT_ANONYMOUS_ID_COOKIE))||`${d.SEGMENT_SOURCE}.${d.SEGMENT_SOURCE_VERSION}.${(0,l.v4)()}`;function f(){return _.categories.analytics}function g(){return(0,o.useSyncExternalStore)(_.subscribe.bind(_),_.getSnapshot.bind(_),_.getServerSnapshot.bind(_))}let _={categories:{analytics:!1,marketing:!1,necessary:!0},listeners:new Set,subscribe(t){return this.listeners.add(t),()=>this.listeners.delete(t)},getSnapshot(){return this.categories},getServerSnapshot:()=>({analytics:!1,marketing:!1,necessary:!0}),setCategories(t){this.categories=t,this.listeners.forEach(t=>t())}};async function v(){if(e)return e;if(n)return n;if(!d.SEGMENT_WRITE_KEY)return void console.warn("[Segment] No write key found");let t=await (0,u.getInitialConsentPreferences)();if(_.setCategories({analytics:t.analytics,marketing:t.marketing,necessary:!0}),!t.analytics)return void console.log("[Segment] Analytics consent not granted, skipping load");let r=new a.AnalyticsBrowser,o=(0,s.createWrapper)({getCategories:()=>_.categories,registerOnConsentChanged:t=>{i=t}})(r);return n=o.load({writeKey:d.SEGMENT_WRITE_KEY,cdnURL:d.SEGMENT_CDN_URL,plugins:[]},{disableClientPersistence:!0,integrations:{"Segment.io":{apiHost:d.SEGMENT_API_HOST,protocol:"https"}}}).then(async()=>(e=o,await S(),window.analytics=e,e)).catch(t=>{console.error("[Segment] Failed to load:",t)})}function y(t,n={}){if(!e||!f())return;let i={...n};i={page_title:document.title,page_url:window.location.href,page_path:window.location.pathname,...i},e.track(t,i)}function m(){if(!e||!f())return;let t={};t.referrer=document.referrer||"direct",y("anthropicdotcom.page.viewed",t)}function b(t){if(!e||!f())return;let n={...t};Object.keys(n).forEach(t=>{(null===n[t]||void 0===n[t])&&delete n[t]}),y("anthropicdotcom.cta.clicked",n)}function w(){let[t,n]=(0,o.useState)(!1),i=(0,h.useGPC)();return(0,o.useEffect)(()=>{i||(0,u.getInitialConsentPreferences)().then(t=>{t.analytics&&v().then(()=>n(!0))}).catch(t=>{console.error("[Segment] Failed to check consent preferences:",t)})},[i]),(0,o.useEffect)(()=>{t&&e&&!i&&(m(),e.page(document?.title,{},{traits:{surface:"nextjs_website"}}))},[t,i]),{analytics:e,isLoaded:t,anonymousId:p,trackPageView:m,trackCtaClick:b,trackEvent:y}}async function S(){if(e)try{await e.setAnonymousId(p),_.categories.analytics&&(0,c.setCookie)(d.SEGMENT_ANONYMOUS_ID_COOKIE,p)}catch(t){console.error("[Segment] Failed to sync anonymous ID:",t)}}function E(t){let n=_.categories.analytics,r=_.categories.marketing;if(_.setCategories({analytics:t.analytics,marketing:t.marketing,necessary:!0}),r&&!t.marketing&&window.fbq&&window.fbq("consent","revoke"),t.analytics&&!n){console.log("[Segment] Analytics consent granted, loading SDK"),v().then(()=>{console.log("[Segment] SDK loaded after consent granted")}).catch(t=>{console.error("[Segment] Failed to load SDK after consent granted:",t)});return}i&&i(_.categories),e&&t.analytics&&S()}t.s(["anonymousId",0,p,"hasAnalyticsConsent",()=>f,"trackCtaClick",()=>b,"trackEvent",()=>y,"trackPageView",()=>m,"updateSegmentConsent",()=>E,"useConsentCategories",()=>g,"useSegment",()=>w])}]);